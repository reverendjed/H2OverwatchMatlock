{"ast":null,"code":"import React,{useState}from'react';import{createUserWithEmailAndPassword,signOut}from'firebase/auth';import{auth}from'../firebase-config';import{useNavigate}from'react-router-dom';import{getFirestore,collection,addDoc}from'firebase/firestore';// Import Firestore functions\nimport'./UserRegistrationForm.css';// Ensure this file exists for styling\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserRegistrationForm(){const navigate=useNavigate();const[firstName,setFirstName]=useState('');const[lastName,setLastName]=useState('');const[email,setEmail]=useState('');const[phone,setPhone]=useState('');const[password,setPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const[level,setLevel]=useState('Level I');// Default to Level I\nconst[passwordError,setPasswordError]=useState('');const[registrationSuccess,setRegistrationSuccess]=useState(false);const handleRegistration=async event=>{event.preventDefault();if(password!==confirmPassword){setPasswordError('Passwords do not match.');return;// Stop the registration process if passwords do not match\n}try{// Create user in Firebase Authentication\nconst userCredential=await createUserWithEmailAndPassword(auth,email,password);const user=userCredential.user;// Create a corresponding user document in Firestore\nconst db=getFirestore();const userDocRef=collection(db,'users');// Define the user data to be stored in Firestore\nconst userData={firstName,lastName,email,phone,role:level,// Assuming 'level' matches your Firestore field name for user roles\nuid:user.uid};// Add the user data to Firestore\nawait addDoc(userDocRef,userData);await signOut(auth);// Optional: Sign out user after successful registration\nsetRegistrationSuccess(true);// Delay navigation to give users time to see the success message\nsetTimeout(()=>{navigate('/login');// Navigate to login page after a delay\n},5000);// 5 seconds delay\n}catch(error){console.error(\"Error creating user:\",error.message);setPasswordError(error.message);// Show error message from the registration attempt\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"registration-form-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.PUBLIC_URL,\"/h2logo.png\"),alt:\"H2O Logo\",className:\"login-logo\"}),registrationSuccess?/*#__PURE__*/_jsxs(\"div\",{className:\"registration-success\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Registration successful! Please log in.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/login'),children:\"Back to Login\"})]}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegistration,className:\"registration-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create a New H2Overwatch Account\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"First Name\",value:firstName,onChange:e=>setFirstName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Last Name\",value:lastName,onChange:e=>setLastName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"Phone Number\",value:phone,onChange:e=>setPhone(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirm Password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true}),/*#__PURE__*/_jsxs(\"select\",{value:level,onChange:e=>setLevel(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Level I\",children:\"Level I\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Level II\",children:\"Level II\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Level III\",children:\"Level III\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Level IV\",children:\"Level IV\"})]}),passwordError&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:passwordError}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"register-button\",children:\"Register\"})]})]});}export default UserRegistrationForm;","map":{"version":3,"names":["React","useState","createUserWithEmailAndPassword","signOut","auth","useNavigate","getFirestore","collection","addDoc","jsx","_jsx","jsxs","_jsxs","UserRegistrationForm","navigate","firstName","setFirstName","lastName","setLastName","email","setEmail","phone","setPhone","password","setPassword","confirmPassword","setConfirmPassword","level","setLevel","passwordError","setPasswordError","registrationSuccess","setRegistrationSuccess","handleRegistration","event","preventDefault","userCredential","user","db","userDocRef","userData","role","uid","setTimeout","error","console","message","className","children","src","concat","process","env","PUBLIC_URL","alt","onClick","onSubmit","type","placeholder","value","onChange","e","target","required"],"sources":["/Users/jeffryjones/Desktop/h2overwatch/login/src/components/UserRegistrationForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { createUserWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { auth } from '../firebase-config';\nimport { useNavigate } from 'react-router-dom';\nimport { getFirestore, collection, addDoc } from 'firebase/firestore'; // Import Firestore functions\nimport './UserRegistrationForm.css'; // Ensure this file exists for styling\n\nfunction UserRegistrationForm() {\n  const navigate = useNavigate();\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [level, setLevel] = useState('Level I'); // Default to Level I\n  const [passwordError, setPasswordError] = useState('');\n  const [registrationSuccess, setRegistrationSuccess] = useState(false);\n\n  const handleRegistration = async (event) => {\n    event.preventDefault();\n    if (password !== confirmPassword) {\n      setPasswordError('Passwords do not match.');\n      return; // Stop the registration process if passwords do not match\n    }\n\n    try {\n      // Create user in Firebase Authentication\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      const user = userCredential.user;\n\n      // Create a corresponding user document in Firestore\n      const db = getFirestore();\n      const userDocRef = collection(db, 'users');\n\n      // Define the user data to be stored in Firestore\n      const userData = {\n        firstName,\n        lastName,\n        email,\n        phone,\n        role: level, // Assuming 'level' matches your Firestore field name for user roles\n        uid: user.uid,\n      };\n\n      // Add the user data to Firestore\n      await addDoc(userDocRef, userData);\n\n      await signOut(auth); // Optional: Sign out user after successful registration\n      setRegistrationSuccess(true);\n\n      // Delay navigation to give users time to see the success message\n      setTimeout(() => {\n        navigate('/login'); // Navigate to login page after a delay\n      }, 5000); // 5 seconds delay\n\n    } catch (error) {\n      console.error(\"Error creating user:\", error.message);\n      setPasswordError(error.message); // Show error message from the registration attempt\n    }\n  };\n\n  return (\n    <div className=\"registration-form-container\">\n      <img src={`${process.env.PUBLIC_URL}/h2logo.png`} alt=\"H2O Logo\" className=\"login-logo\" />\n      {registrationSuccess ? (\n        <div className=\"registration-success\">\n          <p>Registration successful! Please log in.</p>\n          <button onClick={() => navigate('/login')}>Back to Login</button>\n        </div>\n      ) : (\n        <form onSubmit={handleRegistration} className=\"registration-form\">\n          <h2>Create a New H2Overwatch Account</h2>\n          <input type=\"text\" placeholder=\"First Name\" value={firstName} onChange={(e) => setFirstName(e.target.value)} required />\n          <input type=\"text\" placeholder=\"Last Name\" value={lastName} onChange={(e) => setLastName(e.target.value)} required />\n          <input type=\"email\" placeholder=\"Email\" value={email} onChange={(e) => setEmail(e.target.value)} required />\n          <input type=\"tel\" placeholder=\"Phone Number\" value={phone} onChange={(e) => setPhone(e.target.value)} />\n          <input type=\"password\" placeholder=\"Password\" value={password} onChange={(e) => setPassword(e.target.value)} required />\n          <input type=\"password\" placeholder=\"Confirm Password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} required />\n          <select value={level} onChange={(e) => setLevel(e.target.value)} required>\n            <option value=\"Level I\">Level I</option>\n            <option value=\"Level II\">Level II</option>\n            <option value=\"Level III\">Level III</option>\n            <option value=\"Level IV\">Level IV</option>\n          </select>\n          {passwordError && <p className=\"error\">{passwordError}</p>}\n          <button type=\"submit\" className=\"register-button\">Register</button>\n        </form>\n      )}\n    </div>\n  );\n}\n\nexport default UserRegistrationForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}