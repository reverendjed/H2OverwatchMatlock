{"ast":null,"code":"import React,{useState}from'react';import{signOut}from\"firebase/auth\";import{auth}from'../firebase-config';import{useNavigate}from'react-router-dom';import axios from'axios';import'./UserDashboard.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserDashboard(){const[isUploading,setIsUploading]=useState(false);const[uploadMessage,setUploadMessage]=useState('');const navigate=useNavigate();const handleLogout=async()=>{try{await signOut(auth);console.log(\"User signed out successfully\");navigate('/');}catch(error){console.error(\"Error signing out:\",error.message);}};const goToAdminDashboard=()=>{navigate('/AdminDashboard');};// This function takes a base64-encoded string of the image (or video)\nconst handleVideoUpload=async base64Image=>{setIsUploading(true);setUploadMessage('');try{const response=await axios({method:'POST',url:'https://detect.roboflow.com/brown-trout-counter/2',// Your endpoint\nparams:{api_key:'hrHXV6QIsOWhUf9XSJ5F'// Your API key\n},data:base64Image,headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}});console.log(response.data);setUploadMessage('Upload successful! Processing complete.');}catch(error){// Error handling logic as previously defined\n}finally{setIsUploading(false);}};// This function triggers when a file is selected\nconst handleFileSelect=event=>{if(event.target.files.length>0){const fileReader=new FileReader();const file=event.target.files[0];fileReader.readAsDataURL(file);fileReader.onload=()=>{const base64=fileReader.result;// Here, you pass the base64 encoded string to handleVideoUpload\nhandleVideoUpload(base64.split(',')[1]);// Correctly passing the base64-encoded image\n};fileReader.onerror=error=>{console.error('Error: ',error);};}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.PUBLIC_URL,\"/h2logo.png\"),className:\"App-logo\",alt:\"H2Overwatch Logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to the User Dashboard\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Analytics\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileSelect,accept:\"video/*\"}),isUploading&&/*#__PURE__*/_jsx(\"p\",{children:\"Uploading and processing video...\"}),uploadMessage&&/*#__PURE__*/_jsx(\"p\",{children:uploadMessage})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-menu\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Count Fish\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Environmental Data\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Database\"}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:goToAdminDashboard,children:\"Admin Dashboard\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-footer\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Log Out\"})})]});}export default UserDashboard;","map":{"version":3,"names":["React","useState","signOut","auth","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","UserDashboard","isUploading","setIsUploading","uploadMessage","setUploadMessage","navigate","handleLogout","console","log","error","message","goToAdminDashboard","handleVideoUpload","base64Image","response","method","url","params","api_key","data","headers","handleFileSelect","event","target","files","length","fileReader","FileReader","file","readAsDataURL","onload","base64","result","split","onerror","className","children","src","concat","process","env","PUBLIC_URL","alt","type","onChange","accept","onClick"],"sources":["/Users/jeffryjones/Desktop/h2overwatch/login/src/components/UserDashboard.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { signOut } from \"firebase/auth\";\nimport { auth } from '../firebase-config';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport './UserDashboard.css';\n\nfunction UserDashboard() {\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadMessage, setUploadMessage] = useState('');\n  const navigate = useNavigate();\n\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n      console.log(\"User signed out successfully\");\n      navigate('/');\n    } catch (error) {\n      console.error(\"Error signing out:\", error.message);\n    }\n  };\n\n  const goToAdminDashboard = () => {\n    navigate('/AdminDashboard');\n  };\n\n// This function takes a base64-encoded string of the image (or video)\nconst handleVideoUpload = async (base64Image) => {\n  setIsUploading(true);\n  setUploadMessage('');\n  \n  try {\n    const response = await axios({\n      method: 'POST',\n      url: 'https://detect.roboflow.com/brown-trout-counter/2', // Your endpoint\n      params: {\n        api_key: 'hrHXV6QIsOWhUf9XSJ5F', // Your API key\n      },\n      data: base64Image,\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      }\n    });\n\n    console.log(response.data);\n    setUploadMessage('Upload successful! Processing complete.');\n  } catch (error) {\n    // Error handling logic as previously defined\n  } finally {\n    setIsUploading(false);\n  }\n};\n\n// This function triggers when a file is selected\nconst handleFileSelect = (event) => {\n  if (event.target.files.length > 0) {\n    const fileReader = new FileReader();\n    const file = event.target.files[0];\n    \n    fileReader.readAsDataURL(file);\n    fileReader.onload = () => {\n      const base64 = fileReader.result;\n      // Here, you pass the base64 encoded string to handleVideoUpload\n      handleVideoUpload(base64.split(',')[1]); // Correctly passing the base64-encoded image\n    };\n    fileReader.onerror = (error) => {\n      console.error('Error: ', error);\n    };\n  }\n};\n\n\n  return (\n    <div className=\"dashboard-container\">\n      <div className=\"dashboard-header\">\n        <img src={`${process.env.PUBLIC_URL}/h2logo.png`} className=\"App-logo\" alt=\"H2Overwatch Logo\" />\n        <h1>Welcome to the User Dashboard</h1>\n      </div>\n      <div className=\"dashboard-content\">\n        <p>Analytics</p>\n        <input type=\"file\" onChange={handleFileSelect} accept=\"video/*\" />\n        {isUploading && <p>Uploading and processing video...</p>}\n        {uploadMessage && <p>{uploadMessage}</p>}\n      </div>\n      <div className=\"dashboard-menu\">\n        <ul>\n          <li>Count Fish</li>\n          <li>Environmental Data</li>\n          <li>Database</li>\n          <li><button onClick={goToAdminDashboard}>Admin Dashboard</button></li>\n        </ul>\n      </div>\n      <div className=\"dashboard-footer\">\n        <button onClick={handleLogout}>Log Out</button>\n      </div>\n    </div>\n  );\n}\n\nexport default UserDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}